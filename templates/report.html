<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <title>CV Report - {{ personal.full_name }}</title>
    <style>
        @media print {
            .no-print { display: none !important; }
            body { background: white !important; padding: 0 !important; }
            .page { box-shadow: none !important; margin: 0 !important; border: none !important; }
        }
        /* Fixes for background colors in print */
        * { -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important; }
    </style>
</head>
<body class="bg-gray-200 py-10">
    <div class="no-print max-w-[210mm] mx-auto mb-4 flex justify-between items-center bg-white p-4 rounded shadow">
        <span class="text-sm font-bold text-gray-500 uppercase">CV Report Preview</span>
        <div class="space-x-2">
            <button onclick="window.print()" class="bg-blue-600 text-white px-4 py-2 rounded font-bold">Print / Save as PDF</button>
            <a href="/" class="bg-gray-600 text-white underline  px-4 py-2 rounded no-underline font-bold">Return Home</a>
        </div>
    </div>

    <div class="page max-w-[210mm] mx-auto bg-white shadow-2xl flex min-h-[297mm]">
        
        <div class="w-1/3 bg-slate-900 text-white p-8 space-y-8">
            <div class="text-center">
                <div class="w-40 h-40 rounded-full border-4 border-slate-700 mx-auto overflow-hidden mb-4">
                    <img src="/static/images/{{ personal.profile_pic }}" class="w-full h-full object-cover">
                </div>
                <h1 class="text-xl font-bold uppercase tracking-widest leading-tight">{{ personal.full_name }}</h1>
                
                <p class="text-[10px] text-blue-400 mt-2 italic px-2 leading-tight">
                    {{ personal.objective }}
                </p>
            </div>

            <section>
                <h2 class="text-blue-400 font-bold uppercase border-b border-slate-700 mb-3 text-xs tracking-widest">Contact</h2>
                <div class="space-y-2 text-[11px] text-slate-300">
                    <p><strong>Email:</strong><br>{{ personal.email }}</p>
                    <p><strong>Phone:</strong><br>{{ personal.phone }}</p>
                    <p><strong>Address:</strong><br>{{ personal.address }}</p>
                </div>
            </section>

            <section>
                <h2 class="text-blue-400 font-bold uppercase border-b border-slate-700 mb-3 text-xs tracking-widest">Pro Skills</h2>
                {% for skill in skills %}
                    {% set skill_width = "25%" %}
                    {% if skill.level == 'Expert' %}{% set skill_width = "100%" %}
                    {% elif skill.level == 'Advanced' %}{% set skill_width = "75%" %}
                    {% elif skill.level == 'Intermediate' %}{% set skill_width = "50%" %}
                    {% endif %}

                    <div class="mb-2">
                        <div class="flex justify-between text-[10px] uppercase mb-1">
                            <span>{{ skill.name }}</span>
                            <span class="text-blue-400">{{ skill.level }}</span>
                        </div>
                        <div class="w-full bg-slate-700 h-1 rounded-full" style="--progress: {{ skill_width }}">
                            <div class="bg-blue-500 h-1 rounded-full" style="width: var(--progress);"></div>
                        </div>
                    </div>
                {% endfor %}
            </section>
        </div>

        <div class="w-2/3 p-12 space-y-10">
            <header>
                <h2 class="text-3xl font-black text-slate-800 uppercase tracking-tighter">About Me</h2>
                <div class="w-16 h-2 bg-blue-600 mb-4"></div>
                <p class="text-gray-600 text-sm leading-relaxed italic">"{{ personal.about_me }}"</p>
            </header>

            <section>
                <h2 class="text-sm font-bold text-blue-600 uppercase tracking-widest mb-4">Work Experience</h2>
                <div class="space-y-6">
                    {% for exp in experience %}
                    <div class="border-l-2 border-gray-100 pl-4">
                        <div class="flex justify-between items-baseline">
                            <h3 class="font-bold text-slate-800">{{ exp.position }}</h3>
                            <span class="text-[10px] font-bold text-gray-400">{{ exp.duration }}</span>
                        </div>
                        <p class="text-xs font-bold text-blue-500 mb-2">{{ exp.company }}</p>
                        <p class="text-xs text-gray-600 leading-normal">{{ exp.description }}</p>
                    </div>
                    {% endfor %}
                </div>
            </section>

            <section>
                <h2 class="text-sm font-bold text-blue-600 uppercase tracking-widest mb-4">Education</h2>
                {% for edu in education %}
                <div class="mb-4">
                    <p class="text-sm font-bold text-slate-800">{{ edu.institution }}</p>
                    <p class="text-xs text-gray-500">{{ edu.description }} | {{ edu.year }}</p>
                </div>
                {% endfor %}
            </section>

            <section>
                <h2 class="text-sm font-bold text-blue-600 uppercase tracking-widest mb-4">Awards & Honours</h2>
                <div class="grid grid-cols-2 gap-4">
                    {% for award in awards %}
                    <div class="text-xs text-gray-700">
                        <span class="font-bold text-slate-800">{{ award.title }}</span> ({{ award.year }})
                    </div>
                    {% endfor %}
                </div>
            </section>

            <section>
                <h2 class="text-sm font-bold text-blue-600 uppercase tracking-widest mb-4">Professional References</h2>
                <div class="grid grid-cols-2 gap-4">
                    {% for ref in references %}
                    <div class="text-[10px] text-gray-600 border-l border-gray-100 pl-2">
                        <p class="font-bold text-slate-800">{{ ref.name }}</p>
                        <p>{{ ref.relationship }}</p>
                        <p class="text-blue-500">{{ ref.contact }}</p>
                    </div>
                    {% endfor %}
                </div>
            </section>
        </div>
    </div>
</body>
</html>
